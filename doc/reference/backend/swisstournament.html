<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>scripts/backend/swisstournament.js Reference</title>
</head>
<body>
<a href="../index.html">back to index</a>
<a href="index.html">Overview page</a>
<h1>scripts/backend/swisstournament.js</h1>
<p>Implementation of the swiss tournament system where there's only one player.
If you need teams, first consider to enter a team as a single player before
rewriting for multi-player teams, which are only useful for random teams.</p>
<ul>
<li>Author: Erik E. Lorenz</li>
<li>Mail: <a href="mailto:erik.e.lorenz@gmail.com">erik.e.lorenz@gmail.com</a></li>
<li>License: MIT License</li>
</ul>
<h2>Dependencies</h2>
<ul>
<li><a href="./correction.html">./correction</a></li>
<li><a href="./finebuchholzranking.html">./finebuchholzranking</a></li>
<li><a href="./game.html">./game</a></li>
<li><a href="./map.html">./map</a></li>
<li><a href="./options.html">./options</a></li>
<li><a href="./random.html">./random</a></li>
<li><a href="./result.html">./result</a></li>
<li><a href="./rleblobber.html">./rleblobber</a></li>
<li><a href="./tournament.html">./tournament</a></li>
</ul>
<h2>Functions</h2>
<h3>Swisstournament = function()</h3>
<p>constructor</p>
<p><strong>Returns:</strong> {Swisstournament}</p>
<hr />
<h3>Swisstournament.prototype.addPlayer = function(id)</h3>
<p>(implemented tournament function)</p>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p><strong>Returns:</strong></p>
<hr />
<h3>Swisstournament.prototype.start = function()</h3>
<p>(implemented tournament function)</p>
<p><strong>Returns:</strong> this on success, undefined otherwise</p>
<hr />
<h3>Swisstournament.prototype.end = function()</h3>
<p>(implemented tournament function)</p>
<p><strong>Returns:</strong></p>
<hr />
<h3>Swisstournament.prototype.finishGame = function(game, points)</h3>
<p>(implemented tournament function)</p>
<p><strong>Argument:</strong> <strong>game</strong></p>
<p><strong>Argument:</strong> <strong>points</strong></p>
<p><strong>Returns:</strong></p>
<hr />
<h3>Swisstournament.prototype.getGames = function()</h3>
<p>(implemented tournament function)</p>
<p><strong>Returns:</strong> {Array}</p>
<hr />
<h3>function getRoundVotes()</h3>
<p>return the up/down/byevotes of the current round</p>
<p><strong>Returns:</strong> an object containing the three votes</p>
<hr />
<h3>Swisstournament.prototype.getRanking = function()</h3>
<p>(implemented tournament function)</p>
<p><strong>Returns:</strong></p>
<hr />
<h3>function newRoundByRandom()</h3>
<p>Start a new round. This function creates a randomized set of new games,
disregarding the players' ids and previous games</p>
<p><strong>Returns:</strong> this on success, undefined otherwise</p>
<hr />
<h3>function newRoundByHalves()</h3>
<p>Start a new round. This function creates a randomized set of new games,
maintaining up/down/byevotes.</p>
<p><strong>Returns:</strong> this on success, undefined otherwise</p>
<hr />
<h3>function newRoundByWins()</h3>
<p>Start a new round. This function creates a randomized set of new games,
maintaining up/down/byevotes.</p>
<p><strong>Returns:</strong> this on success, undefined otherwise</p>
<hr />
<h3>function applyVotes(votes)</h3>
<p><strong>Argument:</strong> <strong>votes</strong></p>
<p>processed votes structure as returned by preliminaryDownVotes()
and processed by newRoundByWins()</p>
<p><strong>Returns:</strong> {Swisstournament} this</p>
<hr />
<h3>function winGroups()</h3>
<p>Build a 2d array of wingroups. Outer key is the number of wins (0+), values
in inner array are internal player ids</p>
<p><strong>Returns:</strong> 2d array of wingroups</p>
<hr />
<h3>function clearRoundvotes()</h3>
<hr />
<h3>function preliminaryDownVotes(wingroups)</h3>
<p>create a list of players to downvote/byevote using the given wingroups</p>
<p><strong>Argument:</strong> <strong>wingroups</strong></p>
<p>wingroups as returned by winGroups()</p>
<p><strong>Returns:</strong> An object containing byevote, downvotes and an empty array of
upvotes. The key of the downvote array is the number of wins this
player has been voted from.</p>
<hr />
<h3>fillCandidates = function(pid)</h3>
<hr />
<h3>fillCandidates = function(pid)</h3>
<hr />
<h3>function canVote(id, permissions)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id
<strong>Argument:</strong> <strong>permissions</strong></p>
<p>reference to this.options.permissions.something</p>
<p><strong>Returns:</strong> {Boolean} whether vote action complies with the permissions</p>
<hr />
<h3>function canDownVote(id)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id</p>
<p><strong>Returns:</strong> true of the player can be downvoted, false otherwise</p>
<hr />
<h3>function canUpVote(id)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id</p>
<p><strong>Returns:</strong> true of the player can be upvoted, false otherwise</p>
<hr />
<h3>function canByeVote(id)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id</p>
<p><strong>Returns:</strong> true of the player can be byevoted, false otherwise</p>
<hr />
<h3>function downVote(id)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id to downvote</p>
<p><strong>Returns:</strong> {Swisstournament} this</p>
<hr />
<h3>function upVote(id)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id to be upvoted</p>
<p><strong>Returns:</strong> {Swisstournament} this</p>
<hr />
<h3>function byeVote(id)</h3>
<p><strong>Argument:</strong> <strong>id</strong></p>
<p>internal player id to be byevoted</p>
<p><strong>Returns:</strong> {Swisstournament} this</p>
<hr />
<h3>function canPlay(pid1, pid2)</h3>
<p>Verify whether two players can play against another</p>
<p><strong>Argument:</strong> <strong>pid1</strong></p>
<p>internal id of first player
<strong>Argument:</strong> <strong>pid2</strong></p>
<p>iternal id of second player</p>
<p><strong>Returns:</strong> {Boolean} true if they would form a valid game, false otherwise</p>
<hr />
<h3>Swisstournament.prototype.correct = function(game, oldpoints, newpoints)</h3>
<p>correct the result of a game. Since the games are determined by the
tournament itself, there's no need to correct the team</p>
<p><strong>Argument:</strong> <strong>game</strong></p>
<p>the game
<strong>Argument:</strong> <strong>oldpoints</strong></p>
<p>array of faulty points
<strong>Argument:</strong> <strong>newpoints</strong></p>
<p>array of corrected points</p>
<p><strong>Returns:</strong> {Swisstournament} undefined on failure, this otherwise</p>
<hr />
<h3>Swisstournament.prototype.getCorrections = function()</h3>
<p>build a list of corrections which are consistent in format with the
correct() function</p>
<p><strong>Returns:</strong> a list of correction objects</p>
<hr />
<h3>Swisstournament.prototype.toBlob = function()</h3>
<p>stores the current state in a blob, mostly using JSON (</p>
<p><strong>Returns:</strong> the blob</p>
<hr />
<h3>Swisstournament.prototype.fromBlob = function(blob)</h3>
<p>restores a state from the blob</p>
<p><strong>Argument:</strong> <strong>blob</strong></p>
<p>the blob</p>
<hr />
<h3>function copyGame(game)</h3>
<hr />
<h3>Swisstournament.prototype.getState = function()</h3>
<hr />
<h3>Swisstournament.prototype.rankingChanged = function()</h3>
<hr />
<h3>function toType(obj)</h3>
<hr />
<h3>function copyStaticObject(obj)</h3>
<hr />
<h3>Swisstournament.prototype.getType = function()</h3>
<hr />
<h2>Metrics</h2>
<ul>
<li>1137 Lines</li>
<li>29066 Bytes</li>
</ul>
</body>
</html>
