/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,r=function(n){var o=t.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},i=e.webkitRequestFileSystem,a=e.requestFileSystem||i||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f=0,u=function(t){var n=function(){"string"==typeof t?(e.URL||e.webkitURL||e).revokeObjectURL(t):t.remove()};e.chrome?n():setTimeout(n,10)},d=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(i){c(i)}}},s=function(t,c){var s,l,v,w=this,p=t.type,y=!1,m=function(){d(w,["writestart","progress","write","writeend"])},R=function(){(y||!s)&&(s=(e.URL||e.webkitURL||e).createObjectURL(t)),l?l.location.href=s:void 0==e.open(s,"_blank")&&"undefined"!=typeof safari&&(e.location.href=s),w.readyState=w.DONE,m(),u(s)},b=function(e){return function(){return w.readyState!==w.DONE?e.apply(this,arguments):void 0}},h={create:!0,exclusive:!1};w.readyState=w.INIT,c||(c="download"),o?(s=(e.URL||e.webkitURL||e).createObjectURL(t),n.href=s,n.download=c,r(n),w.readyState=w.DONE,m(),u(s)):(e.chrome&&p&&"application/octet-stream"!==p&&(v=t.slice||t.webkitSlice,t=v.call(t,0,t.size,"application/octet-stream"),y=!0),i&&"download"!==c&&(c+=".download"),("application/octet-stream"===p||i)&&(l=e),a?(f+=t.size,a(e.TEMPORARY,f,b(function(e){e.root.getDirectory("saved",h,b(function(e){var n=function(){e.getFile(c,h,b(function(e){e.createWriter(b(function(n){n.onwriteend=function(t){l.location.href=e.toURL(),w.readyState=w.DONE,d(w,"writeend",t),u(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&R()},["writestart","progress","write","abort"].forEach(function(e){n["on"+e]=w["on"+e]}),n.write(t),w.abort=function(){n.abort(),w.readyState=w.DONE},w.readyState=w.WRITING}),R)}),R)};e.getFile(c,{create:!1},b(function(e){e.remove(),n()}),b(function(e){e.code===e.NOT_FOUND_ERR?n():R()}))}),R)}),R)):R())},l=s.prototype;return l.abort=function(){this.readyState=this.DONE,d(this,"abort")},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null,function(e,t){return new s(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("lib/FileSaver",[],function(){return saveAs});